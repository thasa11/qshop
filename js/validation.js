window.onload = initPage;var usernameValid = false;var passwordValid = false;function initPage() {  document.getElementById("username").onblur = checkUsername;  document.getElementById("password2").onblur = checkPassword;  document.getElementById("register").disabled = true;  document.getElementById("register").onclick = registerUser;}function checkUsername() {  document.getElementById("username").className = "thinking";  usernameRequest = createRequest();  if (usernameRequest == null)    alert("Unable to create request");  else {    var theName = document.getElementById("username").value;    var username = escape(theName);    var url= "checkName.php?username=" + username;    usernameRequest.onreadystatechange = showUsernameStatus;    usernameRequest.open("GET", url, true);    usernameRequest.send(null);  }}function showUsernameStatus() {  if (usernameRequest.readyState == 4) {    if (usernameRequest.status == 200) {      if (usernameRequest.responseText == "okay") {        document.getElementById("username").className = "approved";        usernameValid = true;      } else {        document.getElementById("username").className = "denied";        document.getElementById("username").focus();        document.getElementById("username").select();        usernameValid = false;      }      checkFormStatus();    }  }}function checkPassword() {  var password1 = document.getElementById("password1");  var password2 = document.getElementById("password2");  password1.className = "thinking";  // First compare the two passwords  if ((password1.value == "") || (password1.value != password2.value)) {    password1.className = "denied";    passwordValid = false;    document.getElementById("register").disabled = true;    return;  }   // Passwords match, so send request to server  passwordRequest = createRequest();  if (passwordRequest == null) {    alert("Unable to create request");  } else {    var password = escape(password1.value);    // Select correct one for PW generation    var url = 'checkPass.php?password=' + password;//    var url = 'checkPassMake.php?password=' + password;    var requestData =  'password=' + password;    passwordRequest.onreadystatechange = showPasswordStatus;    passwordRequest.open('POST', url, true);    passwordRequest.setRequestHeader('Content-type','application/x-www-form-urlencoded');    passwordRequest.send(requestData);  }}function showPasswordStatus() {  if (passwordRequest.readyState == 4) {    if (passwordRequest.status == 200) {      var password1 = document.getElementById("password1");      if (passwordRequest.responseText == 'okay') {       password1.className = "approved";       passwordValid = true;      } else {       password1.className = "denied";       password1.focus();       password1.select();       passwordValid = false;      }      checkFormStatus();    }  }}function checkFormStatus() {  if (usernameValid && passwordValid) {    document.getElementById("register").disabled = false;  } else {    document.getElementById("register").disabled = true;  }}// Changed to use POST instead of GETfunction registerUser() {//  t = setInterval(scrollImages, 50);  document.getElementById("register").value = "Processing...";  registerRequest = createRequest();  if (registerRequest == null) {    alert("Unable to create request.");  } else {    var url = "register-feedback.php";    var requestData= "username=" +      escape(document.getElementById("username").value) + "&password=" +      escape(document.getElementById("password1").value);    // Use POST, add requestData to send() instead of URL    registerRequest.onreadystatechange = registrationProcessed;    registerRequest.open("POST", url, true);        // We need to set request header for a POST request to tell the server what kind of data is sent    registerRequest.setRequestHeader('Content-type','application/x-www-form-urlencoded');    registerRequest.send(requestData);  }}function registrationProcessed() {  if (registerRequest.readyState == 4) {    if (registerRequest.status == 200) {//      document.getElementById('wrapper').innerHTML = registerRequest.responseText;        var tulos=registerRequest.responseText;        if (tulos=='OK' || true) {            window.location.href='../index.php';        }    }  }}function scrollImages() {  var coverBarDiv = document.getElementById("coverBar");  var images = coverBarDiv.getElementsByTagName("img");  for (var i = 0; i < images.length; i++) {    var left = images[i].style.left.substr(0, images[i].style.left.length - 2);    if (left <=  -86) {      left = 532;    }    images[i].style.left = (left - 1) + "px";  }}